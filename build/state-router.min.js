(function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var o in r)t.call(r,o)&&(e[o]=r[o]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e},r=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};!function(t){var e;e=function(){return"object"==typeof self&&("undefined"!=typeof self&&null!==self?self.self:void 0)===self?self:"object"==typeof global&&("undefined"!=typeof global&&null!==global?global.global:void 0)===global?global:void 0}(),"function"==typeof define&&define.amd?define(["jquery","XRegExp","yess","coffee-concerns","callbacks","construct-with","publisher-subscriber","property-accessors","core-object","lodash","exports"],function(r,n,o,i,s,a,u,c,p){return e.StateRouter=t(e,r,n,o,i,s,a,u,c,p)}):"object"==typeof module&&null!==module&&null!=module.exports&&"object"==typeof module.exports?module.exports=t(e,require("jquery"),require("XRegExp"),require("yess"),require("coffee-concerns"),require("callbacks"),require("construct-with"),require("publisher-subscriber"),require("property-accessors"),require("core-object"),require("lodash")):e.StateRouter=t(e,e.$,e.XRegExp,e._,e.Concerns,e.Callbacks,e.ConstructWith,e.PublisherSubscriber,e.PropertyAccessors,e.CoreObject)}(function(n,o,i,s,a,u,c,p,h,l){var d,f,y,m,v,g,b,S,w,_,R,P,I,x,k,C,A,E,q,O;return E=i.XRegExp||i,S={VERSION:"1.0.1"},function(){var t;return S.property=h.ClassMembers.property,t=function(t,e){return S.property(t,{memo:!0,readonly:!0},e)},t("history",function(){return new this.History(s.result(this,"historyOptions"))}),t("linksInterceptor",function(){return new this.LinksInterceptor(s.result(this,"linksInterceptorOptions"))}),t("paramHelper",function(){return new this.ParamHelper(s.result(this,"paramHelperOptions"))}),t("pathDecorator",function(){return new this.PathDecorator(s.result(this,"pathDecoratorOptions"))}),t("patternCompiler",function(){return new this.PatternCompiler(s.result(this,"patternCompilerOptions"))}),t("stateBuilder",function(){return new this.StateBuilder(s.result(this,"stateBuilderOptions"))}),t("dispatcher",function(){return new this.Dispatcher(s.result(this,"dispatcherOptions"))}),t("stateMatcher",function(){return new this.StateMatcher(s.result(this,"stateMatcherOptions"))}),t("stateStore",function(){return new this.StateStore(s.result(this,"stateStoreOptions"))}),t("states",function(){return this.stateStore})}(),R={included:function(t){return t.property("ownDefaults",{readonly:!0},function(){var t;return("function"==typeof(t=this.options).defaults?t.defaults():void 0)||this.options.defaults||{}}),t.property("defaults",{readonly:!0},function(){var t,e,r,n,o;for(n=this,r={};n;){if(t=n.ownDefaults)for(e in t)o=t[e],null==r[e]&&(r[e]=o);n=n.base}return r})}},x={extractParams:function(e){var r,n,o,i,a;r=S.paramHelper,n=this.pattern.match(e),i=s.extend({},this.defaults);for(o in n)t.call(n,o)&&(a=n[o],r.refersToRegexMatch(o)||null!=a&&(i[o]=function(){return r.refersToQueryString(o)?a:r.decode(o,a)}()));return i},extractChainParams:function(t){return this.identityParams(t)},identityParams:function(e){var r,n,o,i,a,u;r=S.paramHelper,n=this.pattern.identity(e),i=s.extend({},this.defaults),a=this.extractQueryString(e),null!=a&&(i.query=a);for(o in n)t.call(n,o)&&(u=n[o],null==u||r.refersToRegexMatch(o)||(i[o]=r.decode(o,u)));return i},extractQueryString:function(t){var e;return null!=(e=E.exec(t,S.patternCompiler.reQueryString))?e.query:void 0}},x.params=x.extractParams,x.chainParams=x.extractChainParams,I={included:function(t){return t.param("assembler",{as:"ownRouteAssembler"}),t.param("paramAssembler")},paramAssembler:function(t,e,r,n,o,i){var s,a,u;if(u=null!=(a=null!=t?t[i]:void 0)?a:this.defaults[i],null==u){if(!r)throw"["+S+"] Parameter '"+i+"' is required to assemble "+this.name+" state's route";return""}return s=S.paramHelper,(n||"")+(o?s.encodeSplat(i,u):s.encode(i,u))},assembleRoute:function(t){var e,r,n,o;for(o=this,n="";o;)e=o.assembleOwnRoute(t),n=n?e+(e?"/":"")+n:e,o=o.base;return null!=(r=null!=t?t.query:void 0)&&(s.isString(r)||(r=decodeURIComponent(S.$.param(r))),n=n+("?"===r[0]?"":"?")+r),n},assembleOwnRoute:function(t){var e,r,n;return(e=this.ownRouteAssembler)?r=e.call(this,s.extend({},this.ownDefaults,t),this):(n=this.pattern.ownPath,r=S.pathDecorator.replaceParams(n,s.bind(this.paramAssembler,this,t))),r}},I.route=I.assembleRoute,C=function(){var t,e,r,n;t={},r={Before:0,After:1};for(e in r)n=r[e],t["insert"+e]=function(t,e){return function(r,n){var o,i,a,u;if(i=this.get(r),o=this.get(n),a=this.indexOf(i),u=this.indexOf(o),0>a)throw new Error("["+S+"] Can't insert "+o+" "+t+" "+i+" because "+i+" does not exist in store");return u>-1&&s.removeAt(this,u),s.insertAt(this,a+e,o),this}}(e.toLowerCase(),n);return t}(),a.extend(S,p),S.$=o,S.toString=function(){return"StateRouter"},S.start=function(){return S.notify("debug"),S.notify("start")},S.stop=function(){return S.notify("stop")},S.url=function(t,e){var r;return r=S.history.pushStateBased?"/":"#",r+S.states.fetch(t).route(e)},S.go=function(t,e){return S.navigate(S.url(t,e),!0)},S.replace=function(t,e){return S.navigate(S.url(t,e),{load:!0,replace:!0})},S["switch"]=function(t,e){var r,n;return"string"==typeof t||t instanceof w?(n=t,r=e):(n=S.currentState,r=t),S.go(n,s.extend({},S.currentParams,r))},S.navigate=function(t,e){return S.history.navigate(t,e)},S.transition=function(t,e){var r,n,o,i,a,u,c;return n=S.currentRoute,r=S.currentParams,o=S.currentState,a=S.history.route,u=S.states.fetch(t),i=s.extend(u.params(a),e),c=new A({fromState:o,fromParams:r,fromRoute:n,toState:u,toParams:i,toRoute:a}),c.dispatch()},S.controllerLookupNamespace=this,S.controllerLookup=function(t){var e;return e=s.result(S,"controllerLookupNamespace"),e[t+"Controller"]||e[t]||e[t.classCase()+"Controller"]||e[t.classCase()]},S.findController=function(t){var e,r,n,o;if("function"==typeof t){for(n=arguments.length,o=Array(Math.max(n-1,0)),r=0;++r<n;)o[r-1]=arguments[r];e=t.apply(null,o)}else e=S.controllerLookup(t);return"string"==typeof e&&(e=S.controllerLookup(e)),e},w=function(t){function r(){if(r.__super__.constructor.apply(this,arguments),this.id=s.generateID(),this.handles404=!!this.handles404,this["abstract"]=!!this["abstract"],this.isRoot=!this.base,this["abstract"]&&this.handles404)throw new Error("["+S+"] State can't handle 404 errors and be abstract at the same time");if(this.pattern.regexBased&&!this.ownRouteAssembler)throw new Error("["+S+"] To assemble "+this.name+" state's route from pattern which is based on regex you must define custom assembler")}return e(r,t),r.include(R),r.include(x),r.include(I),r.param("name",{required:!0}),r.param("pattern",{required:!0}),r.param("base"),r.param("404",{as:"handles404"}),r.param("abstract"),r.param("controller",{as:"controllerName"}),r.prototype.toString=function(){return"state "+this.name},r.property("root",function(){var t;for(t=this;;){if(!t.base)break;t=t.base}return t!==this?t:void 0}),r.property("chain",function(){var t,e;for(t=[this],e=this;e=e.base;)t.unshift(e);return t}),r.property("depth",function(){var t,e;for(t=0,e=this;e=e.base;)++t;return t}),r}(l),k=function(t){function r(){r.__super__.constructor.apply(this,arguments),this._byName={}}return e(r,t),r.include(C),r.prototype.length=0,r.prototype.push=function(t){return-1===this.indexOf(t)&&(Array.prototype.push.call(this,t),this._byName[t.name]=t),this},r.prototype.get=function(t){return s.isObject(t)?t:this._byName[t]},r.prototype.fetch=function(t){var e;if(e=this.get(t),!e)throw new Error("["+S+"] State "+t+" does not exist!");return e},r.prototype.findOne=function(t,e){var r,n,o;for(r=0,n=this.length;n>r;r++)if(o=this[r],t.call(e,o))return o},r.prototype.indexOf=function(t){var e,r,n,o,i;for(e=this.get(t),r=n=0,o=this.length;o>n;r=++n)if(i=this[r],i===e)return r;return-1},r.prototype.draw=function(t){var e,r;return e=[],r=function(t){var r,n,o,i,a;return o=arguments.length,o>1&&s.isFunction(arguments[1])?(n=arguments[1],a=S.states.get(t)):o>1&&s.isObject(arguments[1])&&(i=arguments[1],r=s.last(e),a=S.createState(t,r,i),o>2&&(n=arguments[2]),S.stateStore.push(a)),n&&(e.push(a),n(),e.pop()),S},t(r)},r}(l),_=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}var n;return e(r,t),r.prototype.build=function(t,e,r){var o,i;return e&&(t=e.name+"."+t,o=e.pattern),r[404]&&null==r.pattern&&!r.path&&(r.pattern=".*"),i=function(){if(null!=r.pattern)return g.fromRegexSource(r.pattern,{base:o});if(null!=r.path)return g.fromPath(r.path,{base:o});throw new Error("["+S+"] Neither path nor pattern specified for state "+t)}(),n(r,{name:t,base:e,pattern:i}),new w(r)},n=s.extend,r}(l),q=s.isObject,O=s.isString,S.createState=function(t){var e,r,n;return r=arguments.length,r>1&&(e=arguments[1]),!q(e)||e instanceof w?(O(e)&&(e=S.states.get(e)),r>2&&(n=arguments[2])):(n=e,e=null),S.stateBuilder.build(t,e,n)},P=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.match=function(t){var e,r;if(r=S.states,e=r.findOne(function(e){return!e["abstract"]&&!e.handles404&&e.pattern.test(t)}),e||(e=r.findOne(function(t){return t.handles404})),!e)throw new Error("["+S+"] None of states matched route '"+t+"' and no 404 state was found");return e},r}(l),g=function(t){function r(){var t,e,n;r.__super__.constructor.apply(this,arguments),this.source=(t=null!=(n=this.base)?n.source:void 0)?t+(this.ownSource?"/"+this.ownSource:""):this.ownSource,this.type=null!=this.ownPath?"path":"regex",this.regexBased="regex"===this.type,this.pathBased="path"===this.type,e=S.patternCompiler,this.reRoute=e.compile(this.source,{starts:!0,ends:!0}),this.reRouteIdentity=e.compile(this.source,{starts:!0,ends:!1})}var n;return e(r,t),r.param("base"),r.param("source",{as:"ownSource",required:!0}),r.param("path",{as:"ownPath"}),r.prototype.test=function(t){return this.reRoute.test(t)},r.prototype.match=function(t){return E.exec(t,this.reRoute)},r.prototype.identity=function(t){return E.exec(t,this.reRouteIdentity)},n=s.extend,r.fromPath=function(t,e){var r,o;return r=S.pathDecorator,o=r.preprocessParams(r.escape(t)),this.fromRegexSource(o,n({},e,{path:t}))},r.fromRegexSource=function(t,e){return new this(n({},e,{source:t}))},r}(l),b=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}var n;return e(r,t),r.prototype.rsQueryString="(?:\\?(?<query>([\\s\\S]*)))?",r.prototype.reQueryString=E(r.prototype.rsQueryString+"$"),r.prototype.leftBoundary="^",r.prototype.rightBoundary=r.prototype.rsQueryString+"$",n=s.isEnabled,r.prototype.compile=function(t,e){return E(this.bound(t,e))},r.prototype.bound=function(t,e){var r,o,i;return i=n(e,"starts"),o=n(e,"ends"),r=""===t,i&&(t=this.leftBoundary+t,r&&!o&&(t+=this.rsQueryString)),o&&(t+=this.rightBoundary),t},r}(l),v=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.params("paramPreprocessor","reEscape","escapeReplacement"),r.prototype.reEscape=/[\-{}\[\]+?.,\\\^$|#\s]/g,r.prototype.reParam=/(\()?(.)?(\*)?:(\w+)\)?/g,r.prototype.escapeReplacement="\\$&",r.prototype.paramPreprocessor=function(t,e,r,n,o){var i;return i="(?:"+(r||"")+"(?<"+o+">"+(n?"[^?]*?":"[^/?]+")+"))",e?"(?:"+i+")?":i},r.prototype.preprocessParams=function(t){return this.replaceParams(t,this.paramPreprocessor)},r.prototype.replaceParams=function(t,e){return t.replace(this.reParam,e)},r.prototype.escape=function(t){return t.replace(this.reEscape,this.escapeReplacement)},r}(l),d=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.dispatch=function(t){var e;e=function(e){return function(){var n,o,i,s,a,u,c,p,h,l,d,f;if(e.dispatcherTransition=t,S.notify("transitionStart",t),t.prevented)return e.dispatcherTransition=null,void S.notify("transitionPrevent",t);if(t.aborted)return e.dispatcherTransition=null,void S.notify("transitionAbort",t);for(n=S.currentState,o=(null!=n?n.chain:void 0)||[],l=t.state,d=(null!=l?l.chain:void 0)||[],i=[],c=[],s=[],a=0,p=o.length;p>a;a++)f=o[a],r.call(d,f)>=0?e.mustReloadState(f,t)?(c.unshift(f),i.push(f)):s.push(f):c.unshift(f);for(u=0,h=d.length;h>u;u++)f=d[u],r.call(i,f)<0&&r.call(s,f)<0&&i.push(f);for(;f=c.shift();)if(e.leaveState(f,t),t.aborted)return e.dispatcherTransition=null,void S.notify("transitionAbort",t);for(;f=i.shift();)if(e.enterState(f,t),t.aborted)return e.dispatcherTransition=null,void S.notify("transitionAbort",t);return e.dispatcherTransition=null,S.notify("transitionSuccess",t)}}(this),this.dispatcherTransition?(this.dispatcherTransition.abort(),s.delay(e)):e()},n.prototype.enterState=function(t,e){var r,n,o,i,a,u;return S.notify("stateEnterStart",t,e),e.aborted?void S.notify("stateEnterAbort",t,e):(n=S.findController(t.controllerName,e.params,e),n&&(u=t.root,a=null!=u?u.__controller:void 0,o=null!=(i=t.base)?i.__controller:void 0,n=s.beforeConstructor(n,function(){return this.rootController=a||void 0,this.parentController=o||void 0}),r=new n(e.params,e),"function"==typeof r.enter&&r.enter(e.toParams,e)),void(e.aborted?(null!=r&&"function"==typeof r.leave&&r.leave(),S.notify("stateEnterAbort",t,e)):(t.__controller=r,t.__paramsIdentity=t.identityParams(e.route),S.notify("stateEnterSuccess",t,e))))},n.prototype.leaveState=function(t,e){var r;return S.notify("stateLeaveStart",t,e),e.aborted?void S.notify("stateLeaveAbort",t,e):(r=t.__controller,null!=r&&"function"==typeof r.leave&&r.leave(e.params,e),e.aborted?void S.notify("stateLeaveAbort",t,e):(delete t.__paramsIdentity,delete t.__controller,S.notify("stateLeaveSuccess",t,e),void 0))},n.prototype.mustReloadState=function(t,e){var r,n,o;return r=t.__paramsIdentity,n=t.identityParams(e.route),!1===((null!=(o=S.options)?o.reloadOnQueryChange:void 0)!==!0?s.isEqual(s.omit(r,"query"),s.omit(n,"query")):s.isEqual(r,n))},n}(l),m=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.reArrayIndex=/^[0-9]+$/,r.prototype.refersToRegexMatch=function(t){return this.reArrayIndex.test(t)||"index"===t||"input"===t},r.prototype.refersToQueryString=function(t){return"query"===t},r.prototype.encode=function(t,e){return encodeURIComponent(e)},r.prototype.encodeSplat=function(t,e){return encodeURI(e)},r.prototype.decode=function(t,e){return decodeURIComponent(e)},r}(l),A=function(t){function r(){r.__super__.constructor.apply(this,arguments),this.prevented=!1,this.aborted=!1}return e(r,t),r.param("fromState"),r.param("fromParams"),r.param("fromRoute"),r.param("toState",{alias:"state",required:!0}),r.param("toParams",{alias:"params",required:!0}),r.param("toRoute",{alias:"route",required:!0}),r.prototype.prevent=function(){return this.aborted||this.prevented||(this.prevented=!0,this.previouslyPrevented=!0),this},r.prototype.abort=function(){return this.aborted||this.prevented||(this.aborted=!0,this.previouslyAborted=!0),this},r.prototype.dispatch=function(){return S.dispatcher.dispatch(this)},r.prototype.retry=function(){return this.prevented=!1,this.aborted=!1,this.dispatch()},r.prototype.toString=function(){var t;return t="transition",t+=this.fromState?" "+this.fromState.name:" <initial>",t+=" -> "+this.toState.name},r}(l),S.on("start",function(){return s.delay(function(){return S.history.start()})}),S.on("stop",function(){return s.delay(function(){return S.history.stop()})}),f=function(t){function n(){var t,e,r;this.options={},this.options.load=!0,this.options.interval=50,n.__super__.constructor.apply(this,arguments),s.onceMethod(this,"start"),s.bindMethod(this,"check"),this.document="undefined"!=typeof document&&null!==document&&document,this.window="undefined"!=typeof window&&null!==window&&window,this.location=null!=(t=this.window)?t.location:void 0,this.history=null!=(e=this.window)?e.history:void 0,this.supportsPushState=null!=(null!=(r=this.history)?r.pushState:void 0),this.supportsHashChange="onhashchange"in this.window,this.pushStateBased=this.supportsPushState&&this.options.pushState!==!1,this.hashChangeBased=!this.pushStateBased&&this.supportsHashChange&&this.options.hashChange!==!1,this.started=!1}return e(n,t),n.derivePath=function(t){return decodeURI((t.pathname+t.search).replace(/%25/g,"%2525")).replace(/^\/+/,"")},n.deriveFragment=function(t){var e;return((null!=(e=t.href.match(/#(.*)$/))?e[1]:void 0)||"")+t.search},n.normalizeRoute=function(t){var e;return e=r.call(t,"?")>=0?t.replace(/\/+\?/,"?"):t.replace(/\/+$/,""),e.replace(/^(\/|#)+/,"")},n.property("path",{readonly:!0},function(){return this.constructor.derivePath(this.location)}),n.property("fragment",{readonly:!0},function(){return this.constructor.deriveFragment(this.location)}),n.property("route",{readonly:!0},function(){return this.pushStateBased?this.path:this.fragment}),n.property("length",{readonly:!0},function(){return this.history.length}),n.prototype.start=function(){return this.ensureNotStarted(),this.pushStateBased?S.$(this.window).on("popstate",this.check):this.hashChangeBased?S.$(this.window).on("hashchange",this.check):this._intervalId=setInterval(this.check,this.options.interval),this.started=!0,this.options.load&&this.load(this.route),this},n.prototype.stop=function(){return this.ensureStarted(),S.$(this.window).off("popstate",this.check),S.$(this.window).off("hashchange",this.check),this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this.started=!1,this},n.prototype.check=function(t){return this.ensureStarted()&&this.route!==this.loadedRoute&&this.load(this.route),this},n.prototype.load=function(t){var e;return this.ensureStarted(),e=this.constructor.normalizeRoute(t),t!==e?this.navigate(e,{replace:!0,load:!0}):(this.loadedRoute=t,S.notify("routeChange",t),!0)},n.prototype.navigate=function(t,e){return this.ensureStarted(),t=this.constructor.normalizeRoute(t),t!==this.loadedRoute?(this.loadedRoute=t,e&&e!==!0||(e={load:!!e}),this.pushStateBased?this._updatePath(t,e.replace):this._updateFragment(t,e.replace),!e.load||this.load(t)):!1},n.prototype._updatePath=function(t,e){var r;r=e?"replaceState":"pushState",this.history[r]({},this.document.title,"/"+t),S.notify("pathUpdate",t,e)},n.prototype._updateFragment=function(t,e){var r;t=t.replace(/\?.*$/,""),e?(r=this.location.href.replace(/(javascript:|#).*$/,""),this.location.replace(r+"#"+t)):this.location.hash="#"+t,S.notify("fragmentUpdate",e)},n.prototype.ensureStarted=function(){if(!this.started)throw new Error("["+S+"] History hasn't been started!");return!0},n.prototype.ensureNotStarted=function(){if(this.started)throw new Error("["+S+"] History has already been started!");return!0},n}(l),S.on("start",function(){return S.linksInterceptor.start()}),S.on("stop",function(){return S.linksInterceptor.stop()}),S.reURIScheme=/^(\w+):(?:\/\/)?/,S.reJavaScriptURI=/^\s*javascript:(.*)$/,S.reAnchorURI=/^\s*(#.*)$/,S.matchURIScheme=function(t){var e;return null!=t&&"function"==typeof t.match&&null!=(e=t.match(S.reURIScheme))?e[0]:void 0},y=function(t){function r(){r.__super__.constructor.apply(this,arguments),s.bindMethod(this,"intercept"),this.started=!1}return e(r,t),r.prototype.start=function(){if(this.started)throw new Error("["+S+"] Links interceptor has already been started!");return this.$document=S.$(document),this.$document.on("click.LinksInterceptor","a",this.intercept),this.started=!0,this},r.prototype.stop=function(){if(!this.started)throw new Error("["+S+"] Links interceptor hasn't been started!");return this.$document.off(".LinksInterceptor"),this.started=!1,this},r.prototype.intercept=function(t){var e,r,n,o,i;return 1!==t.which?void S.notify("linksInterceptor:interceptCancel","Only left-clicks are intercepted."):t.ctrlKey||t.shiftKey||t.metaKey||null!=t.button===1?void S.notify("linksInterceptor:interceptCancel","Links are not intercepted when key is pressed. This allows user to open link in new tab."):(e=S.$(t.currentTarget),(r=e.attr("href"))?S.reJavaScriptURI.test(r)?void S.notify("linksInterceptor:interceptCancel","URI contains javascript: expression."):S.history.pushChangeBased&&S.reAnchorURI.test(r)?void S.notify("linksInterceptor:interceptCancel","Anchor URIs are not intercepted."):(n=null!=(o=e.attr("intercept"))?o:e.data("intercept"),"false"===n||n===!1?void S.notify("linksInterceptor:interceptCancel","Link interception bypassed based on it's attribute."):S.reURIScheme.test(r)?void S.notify("linksInterceptor:interceptCancel","Absolute URI or URI with scheme are not intercepted."):(t.preventDefault(),i=S.history.pushStateBased?f.derivePath(e[0]):f.deriveFragment(e[0]),S.notify("linksInterceptor:intercept",i),void S.navigate(i,!0))):void S.notify("linksInterceptor:interceptCancel","Link is missing href attribute or it's value is blank."))},r}(l),s.isFunction(console.debug)||(console.debug=function(){}),S.on("routeChange",function(){var t;return t=!0,function(e){return t?(console.debug("["+S+"] Bootstrap with route '"+e+"'"),t=!1):console.debug("["+S+"] Route changed '"+e+"'")}}()),S.on("routeChange",function(t){var e;return e=S.stateMatcher.match(t),S.transition(e,e.params(t),t)}),S.on("fragmentUpdate",function(t,e){return console.debug("["+S+"] "+(e?"Replaced hash in history with '"+t+"'":"Set hash to history '"+t+"'"))}),S.on("pathUpdate",function(t,e){return console.debug("["+S+"] "+(e?"Replaced path in history with '"+t+"'":"Pushed path to history '"+t+"'"))}),S.on("transitionStart",function(t){var e;return e=t.previouslyPrevented?"Retrying previously prevented":t.previouslyAborted?"Retrying previously aborted":"Started",console.debug("["+S+"] "+e+" "+t),console.debug("["+S+"] Parameters",t.params)}),S.on("transitionAbort",function(t){return console.debug("["+S+"] Aborted "+t)}),S.on("transitionPrevent",function(t){return console.debug("["+S+"] Prevented "+t)}),S.on("transitionSuccess",function(t){return S.currentParams=t.params,S.currentRoute=t.route}),S.on("transitionSuccess",function(t){return console.debug("["+S+"] Succeed "+t)}),S.on("stateEnterAbort",function(t){return console.debug("["+S+"] "+s.repeat("  ",t.depth+1)+"Aborted "+t)}),S.on("stateEnterSuccess",function(t){return console.debug("["+S+"] "+s.repeat("  ",t.depth+1)+"Succeed "+t)}),S.on("stateEnterSuccess",function(t){return S.currentState=t,S.notify("stateChange",t)}),S.on("stateEnterStart",function(t){return console.debug("["+S+"] "+s.repeat("  ",t.depth)+"Entering "+t+"...")}),S.on("stateLeaveAbort",function(t){return console.debug("["+S+"] "+s.repeat("  ",t.depth+1)+"Aborted "+t)}),S.on("stateLeaveSuccess",function(t){return console.debug("["+S+"] "+s.repeat("  ",t.depth+1)+"Succeed "+t)}),S.on("stateLeaveSuccess",function(t){return S.currentState=t.base}),S.on("stateLeaveStart",function(t){return console.debug("["+S+"] "+s.repeat("  ",t.depth)+"Leaving "+t+"...")}),S.on("linksInterceptor:interceptCancel",function(t){return console.debug("["+S+"] Link interception cancelled. Reason: "+t)}),S.on("linksInterceptor:intercept",function(t){return console.debug("["+S+"] Processing interception. Route: "+t)}),s.extend(S,{State:w,StateStore:k,StateBuilder:_,StateDefaultParameters:R,StateRouteParameters:x,StateRouteAssemble:I,StateStoreFrameworkFeatures:C,Dispatcher:d,History:f,PathDecorator:v,PatternCompiler:b,StateMatcher:P,Transition:A,Pattern:g,ParamHelper:m,LinksInterceptor:y}),S})}).call(this);